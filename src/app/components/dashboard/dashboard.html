<div class="dashboard">
  <header class="header">
    <div class="title">
      <mat-icon>dashboard</mat-icon>
      <h1>Dashboard Insights</h1>
    </div>
    
    <div class="header-actions">
      <button mat-flat-button (click)="refreshDashboard()" [disabled]="isRefreshing()">
        <mat-icon [class.spinning]="isRefreshing()">refresh</mat-icon>
        @if (isRefreshing()) { Refreshing... } @else { Refresh }
      </button>
    </div>
  </header>

  <div class="stats-grid">
    @for (card of stats(); track card.title) {
      <div class="stat-card">
        <div class="accent-bar" [style.background-color]="card.color"></div>
        
        <div class="stat-icon" [style.background-color]="card.color + '20'">
          <mat-icon [style.color]="card.color">{{ card.icon }}</mat-icon>
        </div>
        
        <div class="stat-content">
          <p class="label">{{ card.title }}</p>
          <h2 class="value">{{ card.value }}</h2>
        </div>
      </div>
    }
  </div>

  <div class="content-grid">
    <section class="card">
      <div class="card-header">
        <h3><mat-icon>assignment_turned_in</mat-icon> My Tasks</h3>
      </div>
      
      <div class="card-body">
        <div class="tasks-list">
          @for (task of tasks(); track task.id) {
            <div class="task-item">
              <div class="task-priority" [class]="task.priority"></div>
              <div class="task-content">
                <h4>{{ task.title }}</h4>
                <p>{{ task.description }}</p>
              </div>
            </div>
          } @empty {
            <div class="empty">
              <mat-icon>check_circle_outline</mat-icon>
              <p>All caught up!</p>
            </div>
          }
        </div>
      </div>
    </section>
  </div>
</div>